// Blueprint: Auto-generated by OT Plugin
package ot

import (
	"github.com/blueprint-uservices/blueprint/runtime/core/backend"
	"context"
	"go.opentelemetry.io/otel/trace"
	"github.com/blueprint-uservices/blueprint/examples/sockshop/workflow/payment"
)

type PaymentService_OTClientWrapperInterface interface {
	Authorise(ctx context.Context, amount float32) (payment.Authorisation, error)
	
}

type PaymentService_OTClientWrapper struct {
	Client PaymentService_OTServerWrapperInterface
	CollClient backend.Tracer
}

func New_PaymentService_OTClientWrapper(ctx context.Context, client PaymentService_OTServerWrapperInterface, coll_client backend.Tracer) (*PaymentService_OTClientWrapper, error) {
	handler := &PaymentService_OTClientWrapper{}
	handler.Client = client
	handler.CollClient = coll_client
	return handler, nil
}


func (handler *PaymentService_OTClientWrapper) Authorise(ctx context.Context, amount float32) (ret0 payment.Authorisation, err error) {
	span := trace.SpanFromContext(ctx)
	
	tp, _ := handler.CollClient.GetTracerProvider(ctx)
	tr := tp.Tracer("PaymentService_OTServerWrapperInterface")
	ctx, span = tr.Start(ctx, "PaymentServiceClient_Authorise")
	defer span.End()
	
	trace_ctx, _ := span.SpanContext().MarshalJSON()
	ret0, err = handler.Client.Authorise(ctx, amount, string(trace_ctx))
	if err != nil {
		span.RecordError(err)
	}
	return
}

